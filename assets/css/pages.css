@layer base {
  /* Page Components */

  .typing-reveal {
    --typing-length: 9.5ch;

    width: 0;
    display: none;
    position: relative;
    font-family: var(--font-mono);
    overflow: hidden;
    white-space: nowrap;
    opacity: 0;
    border-right: 2px solid transparent;
  }

  .group:hover .typing-reveal {
    display: block;
    animation: typing 0.8s steps(7, end) forwards, fade-in 0.1s ease-in forwards,
      blink-cursor 1s step-end infinite 0.8s;
    width: var(--typing-length);
    opacity: 1;
    border-right-color: var(--color-primary);
  }

  @keyframes typing {
    from {
      width: 0;
    }
    to {
      width: var(--typing-length);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes blink-cursor {
    0%,
    50% {
      border-right-color: var(--color-primary);
    }
    51%,
    100% {
      border-right-color: transparent;
    }
  }

  .profile-picture {
    position: relative;

    /* Backdrop */
    &::before {
      content: '';
      position: absolute;
      inset: -0.325rem;
      border: 0.1rem solid --alpha(var(--color-content-40) / 0.4);
      border-radius: 100%;
      background: repeating-linear-gradient(
        45deg,
        --alpha(var(--color-content-40) / 0.3),
        --alpha(var(--color-content-40) / 0.35) 0.1rem,
        transparent 0,
        transparent 0.725rem
      );
      z-index: -1;
    }

    /* Progress ring */
    &::after {
      content: '';
      position: absolute;
      inset: -0.325rem;
      border-radius: 100%;
      box-shadow: var(--shadow-lg);
      background: conic-gradient(
        --alpha(var(--color-primary) / 0.9) var(--progress, 0%),
        transparent var(--progress, 0%)
      );
      mask: radial-gradient(
        farthest-side,
        transparent calc(100% - 0.165rem),
        #000 calc(100% - 0.2rem)
      );
      opacity: 1;
      z-index: -1;
      transition: opacity 0.3s ease;
    }

    & .slideshow-container {
      position: relative;
      max-width: 232px;
      aspect-ratio: 1/1;
      border-radius: 100%;
      overflow: hidden;

      @variant md {
        max-width: 280px;
      }
    }

    & .slideshow-container > .slide {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      border-radius: 100%;
      transition: opacity 1000ms ease;
    }

    & .slideshow-container > .slide[data-active] {
      opacity: 1;
      z-index: 1;
    }

    & .slideshow-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 100%;
      box-shadow: var(--shadow-lg);
    }

    /* Navigation buttons */
    & .slideshow-nav-prev,
    & .slideshow-nav-next {
      position: absolute;
      top: 50%;
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-content-20);
      background-color: --alpha(var(--color-surface-10) / 0.8);
      border: 1px solid var(--color-surface-20);
      border-radius: 50%;
      box-shadow: var(--shadow-sm);
      backdrop-filter: blur(8px);
      transform: translateY(-50%);
      transition: all 0.2s ease;
      cursor: pointer;
      z-index: 10;
      opacity: 0;

      &:hover {
        color: var(--color-content-10);
        background-color: --alpha(var(--color-surface-10) / 0.95);
        border-color: var(--color-secondary);
        box-shadow: var(--shadow-md);
        transform: translateY(-50%) scale(1.05);
      }

      &:active {
        transform: translateY(-50%) scale(0.95);
      }
    }

    & .slideshow-nav-prev {
      left: 0.25rem;
    }

    & .slideshow-nav-next {
      right: 0.25rem;
    }

    &:hover .slideshow-nav-prev,
    &:hover .slideshow-nav-next {
      opacity: 1;
    }

    & .slideshow-nav-prev:focus-visible,
    & .slideshow-nav-next:focus-visible {
      opacity: 1;
    }

    &:hover::after {
      opacity: 0;
    }
  }

  .blog-article {
    display: flex;
    flex-direction: column;
    isolation: isolate;

    @variant lg {
      /* Stripes */
      &::before {
        content: '';
        position: absolute;
        inset: 3px;
        border-radius: calc(var(--radius-box) - 2px);
        background-image: repeating-linear-gradient(
          135deg,
          var(--color-primary),
          var(--color-primary) 1px,
          transparent 1px,
          transparent 6px
        );
        mask-image: linear-gradient(to left top, black, transparent 90%),
          linear-gradient(45deg, black, transparent 65%);
        mask-composite: intersect;
        filter: grayscale(100%);
        transition: filter opacity 150ms ease-in-out;
        opacity: 0.2;
        z-index: -1;
      }

      /* Gradient */
      &::after {
        content: '';
        position: absolute;
        inset: 3px;
      }

      &:hover::before {
        filter: none;
        opacity: 0.35;
      }

      &:hover::after {
        border-radius: var(--radius-box);
        background-image: linear-gradient(
          30deg,
          --alpha(var(--color-primary) / var(--bg-opacity, 3%)),
          transparent 80%
        );
      }
    }
  }
}
